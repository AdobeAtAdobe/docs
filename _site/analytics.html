<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="UTF-8">

<!-- Begin Jekyll SEO tag v2.3.0 -->
<title>{} | A@A Template Documentation</title>
<meta property="og:title" content="{}" />
<meta name="author" content="Adobe@Adobe" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="A demo of the template documents" />
<meta property="og:description" content="A demo of the template documents" />
<link rel="canonical" href="http://localhost:4000/pages/aaa/sensei-automated-workflow/analytics.html" />
<meta property="og:url" content="http://localhost:4000/pages/aaa/sensei-automated-workflow/analytics.html" />
<meta property="og:site_name" content="A@A Template Documentation" />
<script type="application/ld+json">
{"name":null,"description":"A demo of the template documents","url":"http://localhost:4000/pages/aaa/sensei-automated-workflow/analytics.html","headline":"{}","dateModified":null,"datePublished":null,"sameAs":null,"@type":"WebPage","author":{"@type":"Person","name":"Adobe@Adobe"},"image":null,"publisher":null,"mainEntityOfPage":null,"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->

    <meta name="description" content="A demo of the template documents"/>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content="#157878">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="/pages/aaa/sensei-automated-workflow/assets/css/style.css?v=">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">A@A Template Documentation</h1>
      <h2 class="project-tagline">A demo of the template documents</h2>
      
      
        <a href="" class="btn">Download .zip</a>
        <a href="" class="btn">Download .tar.gz</a>
      
    </section>

    <section class="main-content">
      <h1 id="adobe-analytics-integration"><a name="analytics" class="anchor">Adobe Analytics Integration</a></h1>
<p>Support for Apple TV and TVML applications is available in the Adobe Analytics Mobile SDK.</p>

<h2 id="page-tracking"><a name="pageTracking" class="anchor">Page Tracking</a></h2>
<p>To simplify page tracking we created a custom TVML element <ADBTrackView>. This TVML element is backed by a native Swift class <ADBTrackStateElement>. At application startup, this view is registered with the TVElementFactory which allows us to place the "ADBTrackView" tag on any page.</ADBTrackStateElement></ADBTrackView></p>

<pre><code>TVElementFactory.registerViewElementClass(ADBTrackStateElement.self, forElementName: "ADBTrackState")</code></pre>

<p>Whenever the ADBTrackState tag is found on a page the TVMLApplicationController will defer rendering back to the native Swift class. The ADBTrackView tag expects a property called “state” which contains the state name which is used for tracking purposes in our analytics suite. All other properties on the ADBTrackView tag will be treated as context data and passed to the analytics engine. Below is an example of the ADBTrackState element being used on a page.</p>

<pre><code>&lt;ADBTrackState state="section" section="Pants"&gt;&lt;/ADBTrackState&gt;</code></pre>

<h2 id="action-tracking"><a name="actionTracking" class="anchor">Action Tracking</a></h2>
<p>To track actions (or events) we used the Adobe Mobile TVJS API. When an element tagged “action” is selected, an event is fired and Presenter.js listens for these events. The example provided looks for the action “addToCart”, if found we also expect the tag to contain a property called productId. The data is then passed to Adobe Analytics the API.</p>

<pre><code>var self = this, 
    ele = event.target, 
    action = ele.getAttribute("action"), 
    productId = ele.getAttribute("productId");

if(action){
    if(action == "addToCart"){
        ADBMobile.trackActionData("scAdd", {'productId':productId});

		var alert = createAlert("Success", productName + " has been added to your shopping cart!");
        alert.addEventListener("select", self.load.bind(self));
        navigationDocument.presentModal(alert);
    }
}
</code></pre>


      <footer class="site-footer">
        
        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a>.</span>
      </footer>
    </section>

    
      <script type="text/javascript">
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'Your Google Analytics tracking ID', 'auto');
        ga('send', 'pageview');
      </script>
    
  </body>
</html>
